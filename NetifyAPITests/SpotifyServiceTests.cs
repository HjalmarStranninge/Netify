using Moq.Protected;
using Moq;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Text;
using System.Threading.Tasks;
using NetifyAPI.Models.Dtos.Artists;
using NetifyAPI.Spotify;
using System.Text.Json;
using System.Net.Http.Json;

namespace NetifyAPITests
{
    [TestClass]
    public class SpotifyServiceTests
    {
        // Mock test to see if search in Spotify returns correct track name and artist
        [TestMethod]
        public async Task SearchForTracks_ReturnsCorrectNameOfTrackAndArtistForTrack()
        {
            // Arrange
            var mockHandler = new Mock<HttpMessageHandler>();
            mockHandler
                .Protected()
                .Setup<Task<HttpResponseMessage>>(
                    "SendAsync",
                    ItExpr.IsAny<HttpRequestMessage>(),
                    ItExpr.IsAny<CancellationToken>()
                    )
                .ReturnsAsync(new HttpResponseMessage()
                {
                    StatusCode = HttpStatusCode.OK,
                    Content = new StringContent("{\r\n\r\n  \"tracks\": {    \"href\": \"https://api.spotify.com/v1/search?query=bye&type=track&market=SE&locale=en-GB%2Cen%3Bq%3D0.5&offset=1&limit=20\",    \"limit\": 20,    \"next\": \"https://api.spotify.com/v1/search?query=bye&type=track&market=SE&locale=en-GB%2Cen%3Bq%3D0.5&offset=21&limit=20\",    \"offset\": 1,    \"previous\": \"https://api.spotify.com/v1/search?query=bye&type=track&market=SE&locale=en-GB%2Cen%3Bq%3D0.5&offset=0&limit=20\",    \"total\": 277,    \"items\": [      {        \"album\": {          \"album_type\": \"album\",          \"total_tracks\": 16,          \"external_urls\": {            \"spotify\": \"https://open.spotify.com/album/5hMd4vAfSUT1cbYCnRUako\"          },          \"href\": \"https://api.spotify.com/v1/albums/5hMd4vAfSUT1cbYCnRUako\",          \"id\": \"5hMd4vAfSUT1cbYCnRUako\",          \"images\": [            {              \"url\": \"https://i.scdn.co/image/ab67616d0000b273fceb9d92981970dbeea23257\",              \"height\": 640,              \"width\": 640            },            {              \"url\": \"https://i.scdn.co/image/ab67616d00001e02fceb9d92981970dbeea23257\",              \"height\": 300,              \"width\": 300            },            {              \"url\": \"https://i.scdn.co/image/ab67616d00004851fceb9d92981970dbeea23257\",              \"height\": 64,              \"width\": 64            }          ],          \"name\": \"No Strings Attached\",          \"release_date\": \"2000-03-21\",          \"release_date_precision\": \"day\",          \"type\": \"album\",          \"uri\": \"spotify:album:5hMd4vAfSUT1cbYCnRUako\",          \"artists\": [            {              \"external_urls\": {                \"spotify\": \"https://open.spotify.com/artist/6Ff53KvcvAj5U7Z1vojB5o\"              },              \"href\": \"https://api.spotify.com/v1/artists/6Ff53KvcvAj5U7Z1vojB5o\",              \"id\": \"6Ff53KvcvAj5U7Z1vojB5o\",              \"name\": \"*NSYNC\",              \"type\": \"artist\",              \"uri\": \"spotify:artist:6Ff53KvcvAj5U7Z1vojB5o\"            }          ],          \"is_playable\": true        },        \"artists\": [          {            \"external_urls\": {              \"spotify\": \"https://open.spotify.com/artist/6Ff53KvcvAj5U7Z1vojB5o\"            },            \"href\": \"https://api.spotify.com/v1/artists/6Ff53KvcvAj5U7Z1vojB5o\",            \"id\": \"6Ff53KvcvAj5U7Z1vojB5o\",            \"name\": \"*NSYNC\",            \"type\": \"artist\",            \"uri\": \"spotify:artist:6Ff53KvcvAj5U7Z1vojB5o\"          }        ],        \"disc_number\": 1,        \"duration_ms\": 200560,        \"explicit\": false,        \"external_ids\": {          \"isrc\": \"USJI10000001\"        },        \"external_urls\": {          \"spotify\": \"https://open.spotify.com/track/4r8lRYnoOGdEi6YyI5OC1o\"        },        \"href\": \"https://api.spotify.com/v1/tracks/4r8lRYnoOGdEi6YyI5OC1o\",        \"id\": \"4r8lRYnoOGdEi6YyI5OC1o\",        \"is_playable\": true,        \"name\": \"Bye Bye Bye\",        \"popularity\": 68,        \"preview_url\": \"https://p.scdn.co/mp3-preview/be65bd81597e7c9689726b170a9b459e0b8a18ae?cid=54c8446567714f6cac24a4b6e3cb0034\",        \"track_number\": 1,        \"type\": \"track\",        \"uri\": \"spotify:track:4r8lRYnoOGdEi6YyI5OC1o\",        \"is_local\": false      },      {        \"album\": {          \"album_type\": \"album\",          \"total_tracks\": 10,          \"external_urls\": {            \"spotify\": \"https://open.spotify.com/album/3vurBIfJkSW6IQGQe8Hn5j\"          },          \"href\": \"https://api.spotify.com/v1/albums/3vurBIfJkSW6IQGQe8Hn5j\",          \"id\": \"3vurBIfJkSW6IQGQe8Hn5j\",          \"images\": [            {              \"url\": \"https://i.scdn.co/image/ab67616d0000b273237966230b59e6bbed3f6cb6\",              \"height\": 640,              \"width\": 640            },            {              \"url\": \"https://i.scdn.co/image/ab67616d00001e02237966230b59e6bbed3f6cb6\",              \"height\": 300,              \"width\": 300            },            {              \"url\": \"https://i.scdn.co/image/ab67616d00004851237966230b59e6bbed3f6cb6\",              \"height\": 64,              \"width\": 64            }          ],          \"name\": \"Attitudes\",          \"release_date\": \"1988-08-28\",          \"release_date_precision\": \"day\",          \"type\": \"album\",          \"uri\": \"spotify:album:3vurBIfJkSW6IQGQe8Hn5j\",          \"artists\": [            {              \"external_urls\": {                \"spotify\": \"https://open.spotify.com/artist/5sn5IwgzVoS4ICZP1lN9mQ\"              },              \"href\": \"https://api.spotify.com/v1/artists/5sn5IwgzVoS4ICZP1lN9mQ\",              \"id\": \"5sn5IwgzVoS4ICZP1lN9mQ\",              \"name\": \"Return\",              \"type\": \"artist\",              \"uri\": \"spotify:artist:5sn5IwgzVoS4ICZP1lN9mQ\"            }          ],          \"is_playable\": true        },        \"artists\": [          {            \"external_urls\": {              \"spotify\": \"https://open.spotify.com/artist/5sn5IwgzVoS4ICZP1lN9mQ\"            },            \"href\": \"https://api.spotify.com/v1/artists/5sn5IwgzVoS4ICZP1lN9mQ\",            \"id\": \"5sn5IwgzVoS4ICZP1lN9mQ\",            \"name\": \"Return\",            \"type\": \"artist\",            \"uri\": \"spotify:artist:5sn5IwgzVoS4ICZP1lN9mQ\"          }        ],        \"disc_number\": 1,        \"duration_ms\": 251000,        \"explicit\": false,        \"external_ids\": {          \"isrc\": \"NOAAC8801030\"        },        \"external_urls\": {          \"spotify\": \"https://open.spotify.com/track/6iFDslV4Bw30MRF4p76YG4\"        },        \"href\": \"https://api.spotify.com/v1/tracks/6iFDslV4Bw30MRF4p76YG4\",        \"id\": \"6iFDslV4Bw30MRF4p76YG4\",        \"is_playable\": true,        \"name\": \"Bye Bye Johnny\",        \"popularity\": 45,        \"preview_url\": \"https://p.scdn.co/mp3-preview/0b34d183f2ad2b5e7b08336644c9af6b44fcf3ea?cid=54c8446567714f6cac24a4b6e3cb0034\",        \"track_number\": 3,        \"type\": \"track\",        \"uri\": \"spotify:track:6iFDslV4Bw30MRF4p76YG4\",        \"is_local\": false      },      {        \"album\": {          \"album_type\": \"album\",          \"total_tracks\": 26,          \"external_urls\": {            \"spotify\": \"https://open.spotify.com/album/23DKEup8CZAYeGdjtwnpEE\"          },          \"href\": \"https://api.spotify.com/v1/albums/23DKEup8CZAYeGdjtwnpEE\",          \"id\": \"23DKEup8CZAYeGdjtwnpEE\",          \"images\": [            {              \"url\": \"https://i.scdn.co/image/ab67616d0000b27383f074bfd3e213283dcdb561\",              \"height\": 640,              \"width\": 640            },            {              \"url\": \"https://i.scdn.co/image/ab67616d00001e0283f074bfd3e213283dcdb561\",              \"height\": 300,              \"width\": 300            },            {              \"url\": \"https://i.scdn.co/image/ab67616d0000485183f074bfd3e213283dcdb561\",              \"height\": 64,              \"width\": 64            }          ],          \"name\": \"Dark Passion Play\",          \"release_date\": \"2007-09-28\",          \"release_date_precision\": \"day\",          \"type\": \"album\",          \"uri\": \"spotify:album:23DKEup8CZAYeGdjtwnpEE\",          \"artists\": [            {              \"external_urls\": {                \"spotify\": \"https://open.spotify.com/artist/2NPduAUeLVsfIauhRwuft1\"              },              \"href\": \"https://api.spotify.com/v1/artists/2NPduAUeLVsfIauhRwuft1\",              \"id\": \"2NPduAUeLVsfIauhRwuft1\",              \"name\": \"Nightwish\",              \"type\": \"artist\",              \"uri\": \"spotify:artist:2NPduAUeLVsfIauhRwuft1\"            }          ],          \"is_playable\": true        },        \"artists\": [          {            \"external_urls\": {              \"spotify\": \"https://open.spotify.com/artist/2NPduAUeLVsfIauhRwuft1\"            },            \"href\": \"https://api.spotify.com/v1/artists/2NPduAUeLVsfIauhRwuft1\",            \"id\": \"2NPduAUeLVsfIauhRwuft1\",            \"name\": \"Nightwish\",            \"type\": \"artist\",            \"uri\": \"spotify:artist:2NPduAUeLVsfIauhRwuft1\"          }        ],        \"disc_number\": 1,        \"duration_ms\": 254615,        \"explicit\": false,        \"external_ids\": {          \"isrc\": \"DED830710402\"        },        \"external_urls\": {          \"spotify\": \"https://open.spotify.com/track/6uwjUM0Y0NfPmLBKVAbUXW\"        },        \"href\": \"https://api.spotify.com/v1/tracks/6uwjUM0Y0NfPmLBKVAbUXW\",        \"id\": \"6uwjUM0Y0NfPmLBKVAbUXW\",        \"is_playable\": true,        \"name\": \"Bye Bye Beautiful\",        \"popularity\": 44,        \"preview_url\": \"https://p.scdn.co/mp3-preview/154075869edda7165034a95f25412688d7b109b3?cid=54c8446567714f6cac24a4b6e3cb0034\",        \"track_number\": 2,        \"type\": \"track\",        \"uri\": \"spotify:track:6uwjUM0Y0NfPmLBKVAbUXW\",        \"is_local\": false      },      {        \"album\": {          \"album_type\": \"album\",          \"total_tracks\": 13,          \"external_urls\": {            \"spotify\": \"https://open.spotify.com/album/33knvUBRR5ekNBrtLqQVTD\"          },          \"href\": \"https://api.spotify.com/v1/albums/33knvUBRR5ekNBrtLqQVTD\",          \"id\": \"33knvUBRR5ekNBrtLqQVTD\",          \"images\": [            {              \"url\": \"https://i.scdn.co/image/ab67616d0000b2737988cb5b6506529454590ece\",              \"height\": 640,              \"width\": 640            },            {              \"url\": \"https://i.scdn.co/image/ab67616d00001e027988cb5b6506529454590ece\",              \"height\": 300,              \"width\": 300            },            {              \"url\": \"https://i.scdn.co/image/ab67616d000048517988cb5b6506529454590ece\",              \"height\": 64,              \"width\": 64            }          ],          \"name\": \"Dark Passion Play\",          \"release_date\": \"2007-09-26\",          \"release_date_precision\": \"day\",          \"type\": \"album\",          \"uri\": \"spotify:album:33knvUBRR5ekNBrtLqQVTD\",          \"artists\": [            {              \"external_urls\": {                \"spotify\": \"https://open.spotify.com/artist/2NPduAUeLVsfIauhRwuft1\"              },              \"href\": \"https://api.spotify.com/v1/artists/2NPduAUeLVsfIauhRwuft1\",              \"id\": \"2NPduAUeLVsfIauhRwuft1\",              \"name\": \"Nightwish\",              \"type\": \"artist\",              \"uri\": \"spotify:artist:2NPduAUeLVsfIauhRwuft1\"            }          ],          \"is_playable\": true        },        \"artists\": [          {            \"external_urls\": {              \"spotify\": \"https://open.spotify.com/artist/2NPduAUeLVsfIauhRwuft1\"            },            \"href\": \"https://api.spotify.com/v1/artists/2NPduAUeLVsfIauhRwuft1\",            \"id\": \"2NPduAUeLVsfIauhRwuft1\",            \"name\": \"Nightwish\",            \"type\": \"artist\",            \"uri\": \"spotify:artist:2NPduAUeLVsfIauhRwuft1\"          }        ],        \"disc_number\": 1,        \"duration_ms\": 254615,        \"explicit\": false,        \"external_ids\": {          \"isrc\": \"DED830710402\"        },        \"external_urls\": {          \"spotify\": \"https://open.spotify.com/track/6K03JHEberhdFjgZvFYcfs\"        },        \"href\": \"https://api.spotify.com/v1/tracks/6K03JHEberhdFjgZvFYcfs\",        \"id\": \"6K03JHEberhdFjgZvFYcfs\",        \"is_playable\": true,        \"name\": \"Bye Bye Beautiful\",        \"popularity\": 58,        \"preview_url\": \"https://p.scdn.co/mp3-preview/154075869edda7165034a95f25412688d7b109b3?cid=54c8446567714f6cac24a4b6e3cb0034\",        \"track_number\": 2,        \"type\": \"track\",        \"uri\": \"spotify:track:6K03JHEberhdFjgZvFYcfs\",        \"is_local\": false      },      {        \"album\": {          \"album_type\": \"single\",          \"total_tracks\": 1,          \"external_urls\": {            \"spotify\": \"https://open.spotify.com/album/4YTr2tDfsAfSMODWen2kf4\"          },          \"href\": \"https://api.spotify.com/v1/albums/4YTr2tDfsAfSMODWen2kf4\",          \"id\": \"4YTr2tDfsAfSMODWen2kf4\",          \"images\": [            {              \"url\": \"https://i.scdn.co/image/ab67616d0000b27380fbf2cf36c55c70406ae6aa\",              \"height\": 640,              \"width\": 640            },            {              \"url\": \"https://i.scdn.co/image/ab67616d00001e0280fbf2cf36c55c70406ae6aa\",              \"height\": 300,              \"width\": 300            },            {              \"url\": \"https://i.scdn.co/image/ab67616d0000485180fbf2cf36c55c70406ae6aa\",              \"height\": 64,              \"width\": 64            }          ],          \"name\": \"bYe\",          \"release_date\": \"2024-01-12\",          \"release_date_precision\": \"day\",          \"type\": \"album\",          \"uri\": \"spotify:album:4YTr2tDfsAfSMODWen2kf4\",          \"artists\": [            {              \"external_urls\": {                \"spotify\": \"https://open.spotify.com/artist/0ZGzi3cUZZtAl2DChP8aOs\"              },              \"href\": \"https://api.spotify.com/v1/artists/0ZGzi3cUZZtAl2DChP8aOs\",              \"id\": \"0ZGzi3cUZZtAl2DChP8aOs\",              \"name\": \"ALQA\",              \"type\": \"artist\",              \"uri\": \"spotify:artist:0ZGzi3cUZZtAl2DChP8aOs\"            }          ],          \"is_playable\": true        },        \"artists\": [          {            \"external_urls\": {              \"spotify\": \"https://open.spotify.com/artist/0ZGzi3cUZZtAl2DChP8aOs\"            },            \"href\": \"https://api.spotify.com/v1/artists/0ZGzi3cUZZtAl2DChP8aOs\",            \"id\": \"0ZGzi3cUZZtAl2DChP8aOs\",            \"name\": \"ALQA\",            \"type\": \"artist\",            \"uri\": \"spotify:artist:0ZGzi3cUZZtAl2DChP8aOs\"          }        ],        \"disc_number\": 1,        \"duration_ms\": 225773,        \"explicit\": false,        \"external_ids\": {          \"isrc\": \"QZY3E2300005\"        },        \"external_urls\": {          \"spotify\": \"https://open.spotify.com/track/2U8oXbHhjJcf9BKPz0PaC8\"        },        \"href\": \"https://api.spotify.com/v1/tracks/2U8oXbHhjJcf9BKPz0PaC8\",        \"id\": \"2U8oXbHhjJcf9BKPz0PaC8\",        \"is_playable\": true,        \"name\": \"bYe\",        \"popularity\": 50,        \"preview_url\": \"https://p.scdn.co/mp3-preview/e3196a91222171afec2a58bb6d98e69e7b1c833f?cid=54c8446567714f6cac24a4b6e3cb0034\",        \"track_number\": 1,        \"type\": \"track\",        \"uri\": \"spotify:track:2U8oXbHhjJcf9BKPz0PaC8\",        \"is_local\": false      },      {        \"album\": {          \"album_type\": \"single\",          \"total_tracks\": 1,          \"external_urls\": {            \"spotify\": \"https://open.spotify.com/album/1oKYKiAwR31eJvkRwpQVrb\"          },          \"href\": \"https://api.spotify.com/v1/albums/1oKYKiAwR31eJvkRwpQVrb\",          \"id\": \"1oKYKiAwR31eJvkRwpQVrb\",          \"images\": [            {              \"url\": \"https://i.scdn.co/image/ab67616d0000b2734204e8bad640cf32eca876a5\",              \"height\": 640,              \"width\": 640            },            {              \"url\": \"https://i.scdn.co/image/ab67616d00001e024204e8bad640cf32eca876a5\",              \"height\": 300,              \"width\": 300            },            {              \"url\": \"https://i.scdn.co/image/ab67616d000048514204e8bad640cf32eca876a5\",              \"height\": 64,              \"width\": 64            }          ],          \"name\": \"Bye Bye\",          \"release_date\": \"2022-10-14\",          \"release_date_precision\": \"day\",          \"type\": \"album\",          \"uri\": \"spotify:album:1oKYKiAwR31eJvkRwpQVrb\",          \"artists\": [            {              \"external_urls\": {                \"spotify\": \"https://open.spotify.com/artist/64KEffDW9EtZ1y2vBYgq8T\"              },              \"href\": \"https://api.spotify.com/v1/artists/64KEffDW9EtZ1y2vBYgq8T\",              \"id\": \"64KEffDW9EtZ1y2vBYgq8T\",              \"name\": \"Marshmello\",              \"type\": \"artist\",              \"uri\": \"spotify:artist:64KEffDW9EtZ1y2vBYgq8T\"            },            {              \"external_urls\": {                \"spotify\": \"https://open.spotify.com/artist/4MCBfE4596Uoi2O4DtmEMz\"              },              \"href\": \"https://api.spotify.com/v1/artists/4MCBfE4596Uoi2O4DtmEMz\",              \"id\": \"4MCBfE4596Uoi2O4DtmEMz\",              \"name\": \"Juice WRLD\",              \"type\": \"artist\",              \"uri\": \"spotify:artist:4MCBfE4596Uoi2O4DtmEMz\"            }          ],          \"is_playable\": true        },        \"artists\": [          {            \"external_urls\": {              \"spotify\": \"https://open.spotify.com/artist/64KEffDW9EtZ1y2vBYgq8T\"            },            \"href\": \"https://api.spotify.com/v1/artists/64KEffDW9EtZ1y2vBYgq8T\",            \"id\": \"64KEffDW9EtZ1y2vBYgq8T\",            \"name\": \"Marshmello\",            \"type\": \"artist\",            \"uri\": \"spotify:artist:64KEffDW9EtZ1y2vBYgq8T\"          },          {            \"external_urls\": {              \"spotify\": \"https://open.spotify.com/artist/4MCBfE4596Uoi2O4DtmEMz\"            },            \"href\": \"https://api.spotify.com/v1/artists/4MCBfE4596Uoi2O4DtmEMz\",            \"id\": \"4MCBfE4596Uoi2O4DtmEMz\",            \"name\": \"Juice WRLD\",            \"type\": \"artist\",            \"uri\": \"spotify:artist:4MCBfE4596Uoi2O4DtmEMz\"          }        ],        \"disc_number\": 1,        \"duration_ms\": 108498,        \"explicit\": true,        \"external_ids\": {          \"isrc\": \"USUG12207828\"        },        \"external_urls\": {          \"spotify\": \"https://open.spotify.com/track/6XO8RlYuJCiI0v3IA48FeJ\"        },        \"href\": \"https://api.spotify.com/v1/tracks/6XO8RlYuJCiI0v3IA48FeJ\",        \"id\": \"6XO8RlYuJCiI0v3IA48FeJ\",        \"is_playable\": true,        \"name\": \"Bye Bye\",        \"popularity\": 72,        \"preview_url\": null,        \"track_number\": 1,        \"type\": \"track\",        \"uri\": \"spotify:track:6XO8RlYuJCiI0v3IA48FeJ\",        \"is_local\": false      },      {        \"album\": {          \"album_type\": \"single\",          \"total_tracks\": 1,          \"external_urls\": {            \"spotify\": \"https://open.spotify.com/album/7ncknlyzo63JmvKfkpKdf2\"          },          \"href\": \"https://api.spotify.com/v1/albums/7ncknlyzo63JmvKfkpKdf2\",          \"id\": \"7ncknlyzo63JmvKfkpKdf2\",          \"images\": [            {              \"url\": \"https://i.scdn.co/image/ab67616d0000b27337951e87cfe998cd37a807ca\",              \"height\": 640,              \"width\": 640            },            {              \"url\": \"https://i.scdn.co/image/ab67616d00001e0237951e87cfe998cd37a807ca\",              \"height\": 300,              \"width\": 300            },            {              \"url\": \"https://i.scdn.co/image/ab67616d0000485137951e87cfe998cd37a807ca\",              \"height\": 64,              \"width\": 64            }          ],          \"name\": \"Bye\",          \"release_date\": \"2023-03-03\",          \"release_date_precision\": \"day\",          \"type\": \"album\",          \"uri\": \"spotify:album:7ncknlyzo63JmvKfkpKdf2\",          \"artists\": [            {              \"external_urls\": {                \"spotify\": \"https://open.spotify.com/artist/1Mw40k757jZuiL0NIJpdO5\"              },              \"href\": \"https://api.spotify.com/v1/artists/1Mw40k757jZuiL0NIJpdO5\",              \"id\": \"1Mw40k757jZuiL0NIJpdO5\",              \"name\": \"GULEED\",              \"type\": \"artist\",              \"uri\": \"spotify:artist:1Mw40k757jZuiL0NIJpdO5\"            }          ],          \"is_playable\": true        },        \"artists\": [          {            \"external_urls\": {              \"spotify\": \"https://open.spotify.com/artist/1Mw40k757jZuiL0NIJpdO5\"            },            \"href\": \"https://api.spotify.com/v1/artists/1Mw40k757jZuiL0NIJpdO5\",            \"id\": \"1Mw40k757jZuiL0NIJpdO5\",            \"name\": \"GULEED\",            \"type\": \"artist\",            \"uri\": \"spotify:artist:1Mw40k757jZuiL0NIJpdO5\"          }        ],        \"disc_number\": 1,        \"duration_ms\": 206666,        \"explicit\": true,        \"external_ids\": {          \"isrc\": \"SE5752368660\"        },        \"external_urls\": {          \"spotify\": \"https://open.spotify.com/track/1rTUM3BdqYSTsZiUVL6YRY\"        },        \"href\": \"https://api.spotify.com/v1/tracks/1rTUM3BdqYSTsZiUVL6YRY\",        \"id\": \"1rTUM3BdqYSTsZiUVL6YRY\",        \"is_playable\": true,        \"name\": \"Bye\",        \"popularity\": 37,        \"preview_url\": \"https://p.scdn.co/mp3-preview/d7e1792b472ae6581b3baa9ba2311b6ac3bb34e1?cid=54c8446567714f6cac24a4b6e3cb0034\",        \"track_number\": 1,        \"type\": \"track\",        \"uri\": \"spotify:track:1rTUM3BdqYSTsZiUVL6YRY\",        \"is_local\": false      },      {        \"album\": {          \"album_type\": \"album\",          \"total_tracks\": 10,          \"external_urls\": {            \"spotify\": \"https://open.spotify.com/album/10jsW2NYd9blCrDITMh2zS\"          },          \"href\": \"https://api.spotify.com/v1/albums/10jsW2NYd9blCrDITMh2zS\",          \"id\": \"10jsW2NYd9blCrDITMh2zS\",          \"images\": [            {              \"url\": \"https://i.scdn.co/image/ab67616d0000b2730085dd4362653ef4c54ebbeb\",              \"height\": 640,              \"width\": 640            },            {              \"url\": \"https://i.scdn.co/image/ab67616d00001e020085dd4362653ef4c54ebbeb\",              \"height\": 300,              \"width\": 300            },            {              \"url\": \"https://i.scdn.co/image/ab67616d000048510085dd4362653ef4c54ebbeb\",              \"height\": 64,              \"width\": 64            }          ],          \"name\": \"American Pie\",          \"release_date\": \"1971\",          \"release_date_precision\": \"year\",          \"type\": \"album\",          \"uri\": \"spotify:album:10jsW2NYd9blCrDITMh2zS\",          \"artists\": [            {              \"external_urls\": {                \"spotify\": \"https://open.spotify.com/artist/1gRNBaI4yn6wCCTvRhGWh8\"              },              \"href\": \"https://api.spotify.com/v1/artists/1gRNBaI4yn6wCCTvRhGWh8\",              \"id\": \"1gRNBaI4yn6wCCTvRhGWh8\",              \"name\": \"Don McLean\",              \"type\": \"artist\",              \"uri\": \"spotify:artist:1gRNBaI4yn6wCCTvRhGWh8\"            }          ],          \"is_playable\": true        },        \"artists\": [          {            \"external_urls\": {              \"spotify\": \"https://open.spotify.com/artist/1gRNBaI4yn6wCCTvRhGWh8\"            },            \"href\": \"https://api.spotify.com/v1/artists/1gRNBaI4yn6wCCTvRhGWh8\",            \"id\": \"1gRNBaI4yn6wCCTvRhGWh8\",            \"name\": \"Don McLean\",            \"type\": \"artist\",            \"uri\": \"spotify:artist:1gRNBaI4yn6wCCTvRhGWh8\"          }        ],        \"disc_number\": 1,        \"duration_ms\": 516893,        \"explicit\": false,        \"external_ids\": {          \"isrc\": \"USEM38600088\"        },        \"external_urls\": {          \"spotify\": \"https://open.spotify.com/track/1fDsrQ23eTAVFElUMaf38X\"        },        \"href\": \"https://api.spotify.com/v1/tracks/1fDsrQ23eTAVFElUMaf38X\",        \"id\": \"1fDsrQ23eTAVFElUMaf38X\",        \"is_playable\": true,        \"name\": \"American Pie\",        \"popularity\": 79,        \"preview_url\": null,        \"track_number\": 1,        \"type\": \"track\",        \"uri\": \"spotify:track:1fDsrQ23eTAVFElUMaf38X\",        \"is_local\": false      },      {        \"album\": {          \"album_type\": \"single\",          \"total_tracks\": 3,          \"external_urls\": {            \"spotify\": \"https://open.spotify.com/album/4To1CK51OcwNtpLnlirXQK\"          },          \"href\": \"https://api.spotify.com/v1/albums/4To1CK51OcwNtpLnlirXQK\",          \"id\": \"4To1CK51OcwNtpLnlirXQK\",          \"images\": [            {              \"url\": \"https://i.scdn.co/image/ab67616d0000b2739339fed17d9b71ce89ee2d63\",              \"height\": 640,              \"width\": 640            },            {              \"url\": \"https://i.scdn.co/image/ab67616d00001e029339fed17d9b71ce89ee2d63\",              \"height\": 300,              \"width\": 300            },            {              \"url\": \"https://i.scdn.co/image/ab67616d000048519339fed17d9b71ce89ee2d63\",              \"height\": 64,              \"width\": 64            }          ],          \"name\": \"ICEWHORE!\",          \"release_date\": \"2023-05-22\",          \"release_date_precision\": \"day\",          \"type\": \"album\",          \"uri\": \"spotify:album:4To1CK51OcwNtpLnlirXQK\",          \"artists\": [            {              \"external_urls\": {                \"spotify\": \"https://open.spotify.com/artist/1TTHC3GlNDaE5eVoC3BVxm\"              },              \"href\": \"https://api.spotify.com/v1/artists/1TTHC3GlNDaE5eVoC3BVxm\",              \"id\": \"1TTHC3GlNDaE5eVoC3BVxm\",              \"name\": \"Lumi Athena\",              \"type\": \"artist\",              \"uri\": \"spotify:artist:1TTHC3GlNDaE5eVoC3BVxm\"            }          ],          \"is_playable\": true        },        \"artists\": [          {            \"external_urls\": {              \"spotify\": \"https://open.spotify.com/artist/1TTHC3GlNDaE5eVoC3BVxm\"            },            \"href\": \"https://api.spotify.com/v1/artists/1TTHC3GlNDaE5eVoC3BVxm\",            \"id\": \"1TTHC3GlNDaE5eVoC3BVxm\",            \"name\": \"Lumi Athena\",            \"type\": \"artist\",            \"uri\": \"spotify:artist:1TTHC3GlNDaE5eVoC3BVxm\"          }        ],        \"disc_number\": 1,        \"duration_ms\": 123062,        \"explicit\": false,        \"external_ids\": {          \"isrc\": \"QZQAY2362018\"        },        \"external_urls\": {          \"spotify\": \"https://open.spotify.com/track/01A9Xt0XyeYIzC9K7MSvua\"        },        \"href\": \"https://api.spotify.com/v1/tracks/01A9Xt0XyeYIzC9K7MSvua\",        \"id\": \"01A9Xt0XyeYIzC9K7MSvua\",        \"is_playable\": true,        \"name\": \"ICEWHORE! - slowed\",        \"popularity\": 75,        \"preview_url\": \"https://p.scdn.co/mp3-preview/47da00bedf25e5744fc7c9a9623c02e402915459?cid=54c8446567714f6cac24a4b6e3cb0034\",        \"track_number\": 3,        \"type\": \"track\",        \"uri\": \"spotify:track:01A9Xt0XyeYIzC9K7MSvua\",        \"is_local\": false      },      {        \"album\": {          \"album_type\": \"single\",          \"total_tracks\": 1,          \"external_urls\": {            \"spotify\": \"https://open.spotify.com/album/3YQGSnNzihiOI3eTxetUAE\"          },          \"href\": \"https://api.spotify.com/v1/albums/3YQGSnNzihiOI3eTxetUAE\",          \"id\": \"3YQGSnNzihiOI3eTxetUAE\",          \"images\": [            {              \"url\": \"https://i.scdn.co/image/ab67616d0000b2738f6a2aa7ecc65edc312d99d0\",              \"height\": 640,              \"width\": 640            },            {              \"url\": \"https://i.scdn.co/image/ab67616d00001e028f6a2aa7ecc65edc312d99d0\",              \"height\": 300,              \"width\": 300            },            {              \"url\": \"https://i.scdn.co/image/ab67616d000048518f6a2aa7ecc65edc312d99d0\",              \"height\": 64,              \"width\": 64            }          ],          \"name\": \"Bye Bye Bye\",          \"release_date\": \"2022-09-30\",          \"release_date_precision\": \"day\",          \"type\": \"album\",          \"uri\": \"spotify:album:3YQGSnNzihiOI3eTxetUAE\",          \"artists\": [            {              \"external_urls\": {                \"spotify\": \"https://open.spotify.com/artist/05GSra7vTwr8o54Brzp2nA\"              },              \"href\": \"https://api.spotify.com/v1/artists/05GSra7vTwr8o54Brzp2nA\",              \"id\": \"05GSra7vTwr8o54Brzp2nA\",              \"name\": \"Helion\",              \"type\": \"artist\",              \"uri\": \"spotify:artist:05GSra7vTwr8o54Brzp2nA\"            },            {              \"external_urls\": {                \"spotify\": \"https://open.spotify.com/artist/52xiNtpaYcZ5jRQ2fqmPI6\"              },              \"href\": \"https://api.spotify.com/v1/artists/52xiNtpaYcZ5jRQ2fqmPI6\",              \"id\": \"52xiNtpaYcZ5jRQ2fqmPI6\",              \"name\": \"Klara Hammarström\",              \"type\": \"artist\",              \"uri\": \"spotify:artist:52xiNtpaYcZ5jRQ2fqmPI6\"            }          ],          \"is_playable\": true        },        \"artists\": [          {            \"external_urls\": {              \"spotify\": \"https://open.spotify.com/artist/05GSra7vTwr8o54Brzp2nA\"            },            \"href\": \"https://api.spotify.com/v1/artists/05GSra7vTwr8o54Brzp2nA\",            \"id\": \"05GSra7vTwr8o54Brzp2nA\",            \"name\": \"Helion\",            \"type\": \"artist\",            \"uri\": \"spotify:artist:05GSra7vTwr8o54Brzp2nA\"          },          {            \"external_urls\": {              \"spotify\": \"https://open.spotify.com/artist/52xiNtpaYcZ5jRQ2fqmPI6\"            },            \"href\": \"https://api.spotify.com/v1/artists/52xiNtpaYcZ5jRQ2fqmPI6\",            \"id\": \"52xiNtpaYcZ5jRQ2fqmPI6\",            \"name\": \"Klara Hammarström\",            \"type\": \"artist\",            \"uri\": \"spotify:artist:52xiNtpaYcZ5jRQ2fqmPI6\"          }        ],        \"disc_number\": 1,        \"duration_ms\": 140444,        \"explicit\": false,        \"external_ids\": {          \"isrc\": \"USUS12200473\"        },        \"external_urls\": {          \"spotify\": \"https://open.spotify.com/track/0Ye0D6M8PVSD0y5p1Ov0Ag\"        },        \"href\": \"https://api.spotify.com/v1/tracks/0Ye0D6M8PVSD0y5p1Ov0Ag\",        \"id\": \"0Ye0D6M8PVSD0y5p1Ov0Ag\",        \"is_playable\": true,        \"name\": \"Bye Bye Bye\",        \"popularity\": 38,        \"preview_url\": \"https://p.scdn.co/mp3-preview/9bea161331fee7e72855bd59cd2efa4f2a0b12c1?cid=54c8446567714f6cac24a4b6e3cb0034\",        \"track_number\": 1,        \"type\": \"track\",        \"uri\": \"spotify:track:0Ye0D6M8PVSD0y5p1Ov0Ag\",        \"is_local\": false      },      {        \"album\": {          \"album_type\": \"single\",          \"total_tracks\": 3,          \"external_urls\": {            \"spotify\": \"https://open.spotify.com/album/5VSZMq4gFIMNympUWJa0AV\"          },          \"href\": \"https://api.spotify.com/v1/albums/5VSZMq4gFIMNympUWJa0AV\",          \"id\": \"5VSZMq4gFIMNympUWJa0AV\",          \"images\": [            {              \"url\": \"https://i.scdn.co/image/ab67616d0000b273451c3d84572c129fe11dc9d3\",              \"height\": 640,              \"width\": 640            },            {              \"url\": \"https://i.scdn.co/image/ab67616d00001e02451c3d84572c129fe11dc9d3\",              \"height\": 300,              \"width\": 300            },            {              \"url\": \"https://i.scdn.co/image/ab67616d00004851451c3d84572c129fe11dc9d3\",              \"height\": 64,              \"width\": 64            }          ],          \"name\": \"Fluxxwave\",          \"release_date\": \"2023-05-07\",          \"release_date_precision\": \"day\",          \"type\": \"album\",          \"uri\": \"spotify:album:5VSZMq4gFIMNympUWJa0AV\",          \"artists\": [            {              \"external_urls\": {                \"spotify\": \"https://open.spotify.com/artist/1rPMCfJhANfBT78l2wf4d6\"              },              \"href\": \"https://api.spotify.com/v1/artists/1rPMCfJhANfBT78l2wf4d6\",              \"id\": \"1rPMCfJhANfBT78l2wf4d6\",              \"name\": \"Clovis Reyes\",              \"type\": \"artist\",              \"uri\": \"spotify:artist:1rPMCfJhANfBT78l2wf4d6\"            }          ],          \"is_playable\": true        },        \"artists\": [          {            \"external_urls\": {              \"spotify\": \"https://open.spotify.com/artist/1rPMCfJhANfBT78l2wf4d6\"            },            \"href\": \"https://api.spotify.com/v1/artists/1rPMCfJhANfBT78l2wf4d6\",            \"id\": \"1rPMCfJhANfBT78l2wf4d6\",            \"name\": \"Clovis Reyes\",            \"type\": \"artist\",            \"uri\": \"spotify:artist:1rPMCfJhANfBT78l2wf4d6\"          }        ],        \"disc_number\": 1,        \"duration_ms\": 161765,        \"explicit\": false,        \"external_ids\": {          \"isrc\": \"QZK6N2350051\"        },        \"external_urls\": {          \"spotify\": \"https://open.spotify.com/track/2cuBB96Fhr5o77iWnAwStS\"        },        \"href\": \"https://api.spotify.com/v1/tracks/2cuBB96Fhr5o77iWnAwStS\",        \"id\": \"2cuBB96Fhr5o77iWnAwStS\",        \"is_playable\": true,        \"name\": \"Fluxxwave (Slowed + Reverb)\",        \"popularity\": 78,        \"preview_url\": \"https://p.scdn.co/mp3-preview/3a3a036d8f9e37a9a5afa92032b0608d17b9e50b?cid=54c8446567714f6cac24a4b6e3cb0034\",        \"track_number\": 3,        \"type\": \"track\",        \"uri\": \"spotify:track:2cuBB96Fhr5o77iWnAwStS\",        \"is_local\": false      },      {        \"album\": {          \"album_type\": \"single\",          \"total_tracks\": 1,          \"external_urls\": {            \"spotify\": \"https://open.spotify.com/album/5J00ADHG1jlJiLjQDPURVh\"          },          \"href\": \"https://api.spotify.com/v1/albums/5J00ADHG1jlJiLjQDPURVh\",          \"id\": \"5J00ADHG1jlJiLjQDPURVh\",          \"images\": [            {              \"url\": \"https://i.scdn.co/image/ab67616d0000b273a506d859897f817da1985d2a\",              \"height\": 640,              \"width\": 640            },            {              \"url\": \"https://i.scdn.co/image/ab67616d00001e02a506d859897f817da1985d2a\",              \"height\": 300,              \"width\": 300            },            {              \"url\": \"https://i.scdn.co/image/ab67616d00004851a506d859897f817da1985d2a\",              \"height\": 64,              \"width\": 64            }          ],          \"name\": \"ICEWHORE!\",          \"release_date\": \"2023-03-24\",          \"release_date_precision\": \"day\",          \"type\": \"album\",          \"uri\": \"spotify:album:5J00ADHG1jlJiLjQDPURVh\",          \"artists\": [            {              \"external_urls\": {                \"spotify\": \"https://open.spotify.com/artist/1TTHC3GlNDaE5eVoC3BVxm\"              },              \"href\": \"https://api.spotify.com/v1/artists/1TTHC3GlNDaE5eVoC3BVxm\",              \"id\": \"1TTHC3GlNDaE5eVoC3BVxm\",              \"name\": \"Lumi Athena\",              \"type\": \"artist\",              \"uri\": \"spotify:artist:1TTHC3GlNDaE5eVoC3BVxm\"            }          ],          \"is_playable\": true        },        \"artists\": [          {            \"external_urls\": {              \"spotify\": \"https://open.spotify.com/artist/1TTHC3GlNDaE5eVoC3BVxm\"            },            \"href\": \"https://api.spotify.com/v1/artists/1TTHC3GlNDaE5eVoC3BVxm\",            \"id\": \"1TTHC3GlNDaE5eVoC3BVxm\",            \"name\": \"Lumi Athena\",            \"type\": \"artist\",            \"uri\": \"spotify:artist:1TTHC3GlNDaE5eVoC3BVxm\"          }        ],        \"disc_number\": 1,        \"duration_ms\": 79052,        \"explicit\": false,        \"external_ids\": {          \"isrc\": \"QZQAY2364546\"        },        \"external_urls\": {          \"spotify\": \"https://open.spotify.com/track/0RgKtaVv27Nff2y29qaD8W\"        },        \"href\": \"https://api.spotify.com/v1/tracks/0RgKtaVv27Nff2y29qaD8W\",        \"id\": \"0RgKtaVv27Nff2y29qaD8W\",        \"is_playable\": true,        \"name\": \"ICEWHORE!\",        \"popularity\": 79,        \"preview_url\": \"https://p.scdn.co/mp3-preview/ad5a7903c9f79e57a5b7e3232aa88a40aa0e490c?cid=54c8446567714f6cac24a4b6e3cb0034\",        \"track_number\": 1,        \"type\": \"track\",        \"uri\": \"spotify:track:0RgKtaVv27Nff2y29qaD8W\",        \"is_local\": false      },      {        \"album\": {          \"album_type\": \"album\",          \"total_tracks\": 17,          \"external_urls\": {            \"spotify\": \"https://open.spotify.com/album/2nZfNhrDCbTNnZEc4iuCcl\"          },          \"href\": \"https://api.spotify.com/v1/albums/2nZfNhrDCbTNnZEc4iuCcl\",          \"id\": \"2nZfNhrDCbTNnZEc4iuCcl\",          \"images\": [            {              \"url\": \"https://i.scdn.co/image/ab67616d0000b2735b646e3a50ea4f0e4c5b5aa3\",              \"height\": 640,              \"width\": 640            },            {              \"url\": \"https://i.scdn.co/image/ab67616d00001e025b646e3a50ea4f0e4c5b5aa3\",              \"height\": 300,              \"width\": 300            },            {              \"url\": \"https://i.scdn.co/image/ab67616d000048515b646e3a50ea4f0e4c5b5aa3\",              \"height\": 64,              \"width\": 64            }          ],          \"name\": \"Once Upon A Star\",          \"release_date\": \"1975\",          \"release_date_precision\": \"year\",          \"type\": \"album\",          \"uri\": \"spotify:album:2nZfNhrDCbTNnZEc4iuCcl\",          \"artists\": [            {              \"external_urls\": {                \"spotify\": \"https://open.spotify.com/artist/3r9TXuXfOUxXjgYgAR0fP8\"              },              \"href\": \"https://api.spotify.com/v1/artists/3r9TXuXfOUxXjgYgAR0fP8\",              \"id\": \"3r9TXuXfOUxXjgYgAR0fP8\",              \"name\": \"Bay City Rollers\",              \"type\": \"artist\",              \"uri\": \"spotify:artist:3r9TXuXfOUxXjgYgAR0fP8\"            }          ],          \"is_playable\": true        },        \"artists\": [          {            \"external_urls\": {              \"spotify\": \"https://open.spotify.com/artist/3r9TXuXfOUxXjgYgAR0fP8\"            },            \"href\": \"https://api.spotify.com/v1/artists/3r9TXuXfOUxXjgYgAR0fP8\",            \"id\": \"3r9TXuXfOUxXjgYgAR0fP8\",            \"name\": \"Bay City Rollers\",            \"type\": \"artist\",            \"uri\": \"spotify:artist:3r9TXuXfOUxXjgYgAR0fP8\"          }        ],        \"disc_number\": 1,        \"duration_ms\": 170360,        \"explicit\": false,        \"external_ids\": {          \"isrc\": \"USAR17500008\"        },        \"external_urls\": {          \"spotify\": \"https://open.spotify.com/track/7wC5vOh3fQibFYWjCIotKw\"        },        \"href\": \"https://api.spotify.com/v1/tracks/7wC5vOh3fQibFYWjCIotKw\",        \"id\": \"7wC5vOh3fQibFYWjCIotKw\",        \"is_playable\": true,        \"name\": \"Bye Bye Baby\",        \"popularity\": 58,        \"preview_url\": \"https://p.scdn.co/mp3-preview/1e27849d9e8481b68bad224955f6cf964afd70d0?cid=54c8446567714f6cac24a4b6e3cb0034\",        \"track_number\": 1,        \"type\": \"track\",        \"uri\": \"spotify:track:7wC5vOh3fQibFYWjCIotKw\",        \"is_local\": false      },      {        \"album\": {          \"album_type\": \"album\",          \"total_tracks\": 10,          \"external_urls\": {            \"spotify\": \"https://open.spotify.com/album/5haiDu2ti0IHBHchx7dNjt\"          },          \"href\": \"https://api.spotify.com/v1/albums/5haiDu2ti0IHBHchx7dNjt\",          \"id\": \"5haiDu2ti0IHBHchx7dNjt\",          \"images\": [            {              \"url\": \"https://i.scdn.co/image/ab67616d0000b273fb77d07acf427104ca752bd9\",              \"height\": 640,              \"width\": 640            },            {              \"url\": \"https://i.scdn.co/image/ab67616d00001e02fb77d07acf427104ca752bd9\",              \"height\": 300,              \"width\": 300            },            {              \"url\": \"https://i.scdn.co/image/ab67616d00004851fb77d07acf427104ca752bd9\",              \"height\": 64,              \"width\": 64            }          ],          \"name\": \"Don't Go To Strangers (Rudy Van Gelder Remaster)\",          \"release_date\": \"1960-01-01\",          \"release_date_precision\": \"day\",          \"type\": \"album\",          \"uri\": \"spotify:album:5haiDu2ti0IHBHchx7dNjt\",          \"artists\": [            {              \"external_urls\": {                \"spotify\": \"https://open.spotify.com/artist/3CEdEF8RsuL3hAFJaujvr0\"              },              \"href\": \"https://api.spotify.com/v1/artists/3CEdEF8RsuL3hAFJaujvr0\",              \"id\": \"3CEdEF8RsuL3hAFJaujvr0\",              \"name\": \"Etta Jones\",              \"type\": \"artist\",              \"uri\": \"spotify:artist:3CEdEF8RsuL3hAFJaujvr0\"            }          ],          \"is_playable\": true        },        \"artists\": [          {            \"external_urls\": {              \"spotify\": \"https://open.spotify.com/artist/3CEdEF8RsuL3hAFJaujvr0\"            },            \"href\": \"https://api.spotify.com/v1/artists/3CEdEF8RsuL3hAFJaujvr0\",            \"id\": \"3CEdEF8RsuL3hAFJaujvr0\",            \"name\": \"Etta Jones\",            \"type\": \"artist\",            \"uri\": \"spotify:artist:3CEdEF8RsuL3hAFJaujvr0\"          }        ],        \"disc_number\": 1,        \"duration_ms\": 194240,        \"explicit\": false,        \"external_ids\": {          \"isrc\": \"USFI86000022\"        },        \"external_urls\": {          \"spotify\": \"https://open.spotify.com/track/7GBPpRMtLyGA6svXQMNfIN\"        },        \"href\": \"https://api.spotify.com/v1/tracks/7GBPpRMtLyGA6svXQMNfIN\",        \"id\": \"7GBPpRMtLyGA6svXQMNfIN\",        \"is_playable\": true,        \"name\": \"Bye Bye Blackbird\",        \"popularity\": 57,        \"preview_url\": null,        \"track_number\": 9,        \"type\": \"track\",        \"uri\": \"spotify:track:7GBPpRMtLyGA6svXQMNfIN\",        \"is_local\": false      },      {        \"album\": {          \"album_type\": \"single\",          \"total_tracks\": 1,          \"external_urls\": {            \"spotify\": \"https://open.spotify.com/album/2EAUAqdIVckKAPCCT0hAQg\"          },          \"href\": \"https://api.spotify.com/v1/albums/2EAUAqdIVckKAPCCT0hAQg\",          \"id\": \"2EAUAqdIVckKAPCCT0hAQg\",          \"images\": [            {              \"url\": \"https://i.scdn.co/image/ab67616d0000b2731d93ddc540c76c8ff34a6498\",              \"height\": 640,              \"width\": 640            },            {              \"url\": \"https://i.scdn.co/image/ab67616d00001e021d93ddc540c76c8ff34a6498\",              \"height\": 300,              \"width\": 300            },            {              \"url\": \"https://i.scdn.co/image/ab67616d000048511d93ddc540c76c8ff34a6498\",              \"height\": 64,              \"width\": 64            }          ],          \"name\": \"Sleepwalker (Slowed)\",          \"release_date\": \"2023-07-14\",          \"release_date_precision\": \"day\",          \"type\": \"album\",          \"uri\": \"spotify:album:2EAUAqdIVckKAPCCT0hAQg\",          \"artists\": [            {              \"external_urls\": {                \"spotify\": \"https://open.spotify.com/artist/0zilOJ2Ze0FLrQ76cZQaoc\"              },              \"href\": \"https://api.spotify.com/v1/artists/0zilOJ2Ze0FLrQ76cZQaoc\",              \"id\": \"0zilOJ2Ze0FLrQ76cZQaoc\",              \"name\": \"akiaura\",              \"type\": \"artist\",              \"uri\": \"spotify:artist:0zilOJ2Ze0FLrQ76cZQaoc\"            },            {              \"external_urls\": {                \"spotify\": \"https://open.spotify.com/artist/700c9Qz2z6HZKTumeliKAw\"              },              \"href\": \"https://api.spotify.com/v1/artists/700c9Qz2z6HZKTumeliKAw\",              \"id\": \"700c9Qz2z6HZKTumeliKAw\",              \"name\": \"LONOWN\",              \"type\": \"artist\",              \"uri\": \"spotify:artist:700c9Qz2z6HZKTumeliKAw\"            },            {              \"external_urls\": {                \"spotify\": \"https://open.spotify.com/artist/31wcwYyqQIfZCtIzCY3R53\"              },              \"href\": \"https://api.spotify.com/v1/artists/31wcwYyqQIfZCtIzCY3R53\",              \"id\": \"31wcwYyqQIfZCtIzCY3R53\",              \"name\": \"STM\",              \"type\": \"artist\",              \"uri\": \"spotify:artist:31wcwYyqQIfZCtIzCY3R53\"            }          ],          \"is_playable\": true        },        \"artists\": [          {            \"external_urls\": {              \"spotify\": \"https://open.spotify.com/artist/0zilOJ2Ze0FLrQ76cZQaoc\"            },            \"href\": \"https://api.spotify.com/v1/artists/0zilOJ2Ze0FLrQ76cZQaoc\",            \"id\": \"0zilOJ2Ze0FLrQ76cZQaoc\",            \"name\": \"akiaura\",            \"type\": \"artist\",            \"uri\": \"spotify:artist:0zilOJ2Ze0FLrQ76cZQaoc\"          },          {            \"external_urls\": {              \"spotify\": \"https://open.spotify.com/artist/700c9Qz2z6HZKTumeliKAw\"            },            \"href\": \"https://api.spotify.com/v1/artists/700c9Qz2z6HZKTumeliKAw\",            \"id\": \"700c9Qz2z6HZKTumeliKAw\",            \"name\": \"LONOWN\",            \"type\": \"artist\",            \"uri\": \"spotify:artist:700c9Qz2z6HZKTumeliKAw\"          },          {            \"external_urls\": {              \"spotify\": \"https://open.spotify.com/artist/31wcwYyqQIfZCtIzCY3R53\"            },            \"href\": \"https://api.spotify.com/v1/artists/31wcwYyqQIfZCtIzCY3R53\",            \"id\": \"31wcwYyqQIfZCtIzCY3R53\",            \"name\": \"STM\",            \"type\": \"artist\",            \"uri\": \"spotify:artist:31wcwYyqQIfZCtIzCY3R53\"          }        ],        \"disc_number\": 1,        \"duration_ms\": 258008,        \"explicit\": false,        \"external_ids\": {          \"isrc\": \"DGA062346464\"        },        \"external_urls\": {          \"spotify\": \"https://open.spotify.com/track/5cjRF0yXxYvqzmJfUbq9AW\"        },        \"href\": \"https://api.spotify.com/v1/tracks/5cjRF0yXxYvqzmJfUbq9AW\",        \"id\": \"5cjRF0yXxYvqzmJfUbq9AW\",        \"is_playable\": true,        \"name\": \"Sleepwalker - Slowed\",        \"popularity\": 75,        \"preview_url\": \"https://p.scdn.co/mp3-preview/fb1ca9f109e46a0c06469eb3a27e59ee3a7a34ae?cid=54c8446567714f6cac24a4b6e3cb0034\",        \"track_number\": 1,        \"type\": \"track\",        \"uri\": \"spotify:track:5cjRF0yXxYvqzmJfUbq9AW\",        \"is_local\": false      },      {        \"album\": {          \"album_type\": \"album\",          \"total_tracks\": 11,          \"external_urls\": {            \"spotify\": \"https://open.spotify.com/album/5cFL3OKYGj71I8i2uQ7YGp\"          },          \"href\": \"https://api.spotify.com/v1/albums/5cFL3OKYGj71I8i2uQ7YGp\",          \"id\": \"5cFL3OKYGj71I8i2uQ7YGp\",          \"images\": [            {              \"url\": \"https://i.scdn.co/image/ab67616d0000b273f967f99b5c57b746756c489e\",              \"height\": 640,              \"width\": 640            },            {              \"url\": \"https://i.scdn.co/image/ab67616d00001e02f967f99b5c57b746756c489e\",              \"height\": 300,              \"width\": 300            },            {              \"url\": \"https://i.scdn.co/image/ab67616d00004851f967f99b5c57b746756c489e\",              \"height\": 64,              \"width\": 64            }          ],          \"name\": \"\\\"They're Off and Rolling\\\" Says Archie\",          \"release_date\": \"1957-05-01\",          \"release_date_precision\": \"day\",          \"type\": \"album\",          \"uri\": \"spotify:album:5cFL3OKYGj71I8i2uQ7YGp\",          \"artists\": [            {              \"external_urls\": {                \"spotify\": \"https://open.spotify.com/artist/4ACplpEqD6JIVgKrafauzs\"              },              \"href\": \"https://api.spotify.com/v1/artists/4ACplpEqD6JIVgKrafauzs\",              \"id\": \"4ACplpEqD6JIVgKrafauzs\",              \"name\": \"The Everly Brothers\",              \"type\": \"artist\",              \"uri\": \"spotify:artist:4ACplpEqD6JIVgKrafauzs\"            }          ],          \"is_playable\": true        },        \"artists\": [          {            \"external_urls\": {              \"spotify\": \"https://open.spotify.com/artist/4ACplpEqD6JIVgKrafauzs\"            },            \"href\": \"https://api.spotify.com/v1/artists/4ACplpEqD6JIVgKrafauzs\",            \"id\": \"4ACplpEqD6JIVgKrafauzs\",            \"name\": \"The Everly Brothers\",            \"type\": \"artist\",            \"uri\": \"spotify:artist:4ACplpEqD6JIVgKrafauzs\"          }        ],        \"disc_number\": 1,        \"duration_ms\": 138600,        \"explicit\": false,        \"external_ids\": {          \"isrc\": \"UKMUY1704107\"        },        \"external_urls\": {          \"spotify\": \"https://open.spotify.com/track/2ilqH4qO5BpS3B9keqFqDR\"        },        \"href\": \"https://api.spotify.com/v1/tracks/2ilqH4qO5BpS3B9keqFqDR\",        \"id\": \"2ilqH4qO5BpS3B9keqFqDR\",        \"is_playable\": true,        \"name\": \"Bye Bye Love - Original Recording Remastered\",        \"popularity\": 52,        \"preview_url\": \"https://p.scdn.co/mp3-preview/15d46001ecc60d0d35b7d66215408292d3e834a0?cid=54c8446567714f6cac24a4b6e3cb0034\",        \"track_number\": 3,        \"type\": \"track\",        \"uri\": \"spotify:track:2ilqH4qO5BpS3B9keqFqDR\",        \"is_local\": false      },      {        \"album\": {          \"album_type\": \"album\",          \"total_tracks\": 26,          \"external_urls\": {            \"spotify\": \"https://open.spotify.com/album/4hDok0OAJd57SGIT8xuWJH\"          },          \"href\": \"https://api.spotify.com/v1/albums/4hDok0OAJd57SGIT8xuWJH\",          \"id\": \"4hDok0OAJd57SGIT8xuWJH\",          \"images\": [            {              \"url\": \"https://i.scdn.co/image/ab67616d0000b273a48964b5d9a3d6968ae3e0de\",              \"height\": 640,              \"width\": 640            },            {              \"url\": \"https://i.scdn.co/image/ab67616d00001e02a48964b5d9a3d6968ae3e0de\",              \"height\": 300,              \"width\": 300            },            {              \"url\": \"https://i.scdn.co/image/ab67616d00004851a48964b5d9a3d6968ae3e0de\",              \"height\": 64,              \"width\": 64            }          ],          \"name\": \"Fearless (Taylor's Version)\",          \"release_date\": \"2021-04-09\",          \"release_date_precision\": \"day\",          \"type\": \"album\",          \"uri\": \"spotify:album:4hDok0OAJd57SGIT8xuWJH\",          \"artists\": [            {              \"external_urls\": {                \"spotify\": \"https://open.spotify.com/artist/06HL4z0CvFAxyc27GXpf02\"              },              \"href\": \"https://api.spotify.com/v1/artists/06HL4z0CvFAxyc27GXpf02\",              \"id\": \"06HL4z0CvFAxyc27GXpf02\",              \"name\": \"Taylor Swift\",              \"type\": \"artist\",              \"uri\": \"spotify:artist:06HL4z0CvFAxyc27GXpf02\"            }          ],          \"is_playable\": true        },        \"artists\": [          {            \"external_urls\": {              \"spotify\": \"https://open.spotify.com/artist/06HL4z0CvFAxyc27GXpf02\"            },            \"href\": \"https://api.spotify.com/v1/artists/06HL4z0CvFAxyc27GXpf02\",            \"id\": \"06HL4z0CvFAxyc27GXpf02\",            \"name\": \"Taylor Swift\",            \"type\": \"artist\",            \"uri\": \"spotify:artist:06HL4z0CvFAxyc27GXpf02\"          }        ],        \"disc_number\": 1,        \"duration_ms\": 242157,        \"explicit\": false,        \"external_ids\": {          \"isrc\": \"USUG12100642\"        },        \"external_urls\": {          \"spotify\": \"https://open.spotify.com/track/4qUijfYU8EoIWiY6oSyrgT\"        },        \"href\": \"https://api.spotify.com/v1/tracks/4qUijfYU8EoIWiY6oSyrgT\",        \"id\": \"4qUijfYU8EoIWiY6oSyrgT\",        \"is_playable\": true,        \"name\": \"Bye Bye Baby (Taylor’s Version) (From The Vault)\",        \"popularity\": 67,        \"preview_url\": null,        \"track_number\": 26,        \"type\": \"track\",        \"uri\": \"spotify:track:4qUijfYU8EoIWiY6oSyrgT\",        \"is_local\": false      },      {        \"album\": {          \"album_type\": \"single\",          \"total_tracks\": 6,          \"external_urls\": {            \"spotify\": \"https://open.spotify.com/album/6MW6qxThKOfnRVqFkxK0H2\"          },          \"href\": \"https://api.spotify.com/v1/albums/6MW6qxThKOfnRVqFkxK0H2\",          \"id\": \"6MW6qxThKOfnRVqFkxK0H2\",          \"images\": [            {              \"url\": \"https://i.scdn.co/image/ab67616d0000b273c51ee112fc75dd2ce5726f83\",              \"height\": 640,              \"width\": 640            },            {              \"url\": \"https://i.scdn.co/image/ab67616d00001e02c51ee112fc75dd2ce5726f83\",              \"height\": 300,              \"width\": 300            },            {              \"url\": \"https://i.scdn.co/image/ab67616d00004851c51ee112fc75dd2ce5726f83\",              \"height\": 64,              \"width\": 64            }          ],          \"name\": \"Ketamine Girl\",          \"release_date\": \"2023-06-30\",          \"release_date_precision\": \"day\",          \"type\": \"album\",          \"uri\": \"spotify:album:6MW6qxThKOfnRVqFkxK0H2\",          \"artists\": [            {              \"external_urls\": {                \"spotify\": \"https://open.spotify.com/artist/0zilOJ2Ze0FLrQ76cZQaoc\"              },              \"href\": \"https://api.spotify.com/v1/artists/0zilOJ2Ze0FLrQ76cZQaoc\",              \"id\": \"0zilOJ2Ze0FLrQ76cZQaoc\",              \"name\": \"akiaura\",              \"type\": \"artist\",              \"uri\": \"spotify:artist:0zilOJ2Ze0FLrQ76cZQaoc\"            },            {              \"external_urls\": {                \"spotify\": \"https://open.spotify.com/artist/700c9Qz2z6HZKTumeliKAw\"              },              \"href\": \"https://api.spotify.com/v1/artists/700c9Qz2z6HZKTumeliKAw\",              \"id\": \"700c9Qz2z6HZKTumeliKAw\",              \"name\": \"LONOWN\",              \"type\": \"artist\",              \"uri\": \"spotify:artist:700c9Qz2z6HZKTumeliKAw\"            }          ],          \"is_playable\": true        },        \"artists\": [          {            \"external_urls\": {              \"spotify\": \"https://open.spotify.com/artist/0zilOJ2Ze0FLrQ76cZQaoc\"            },            \"href\": \"https://api.spotify.com/v1/artists/0zilOJ2Ze0FLrQ76cZQaoc\",            \"id\": \"0zilOJ2Ze0FLrQ76cZQaoc\",            \"name\": \"akiaura\",            \"type\": \"artist\",            \"uri\": \"spotify:artist:0zilOJ2Ze0FLrQ76cZQaoc\"          },          {            \"external_urls\": {              \"spotify\": \"https://open.spotify.com/artist/700c9Qz2z6HZKTumeliKAw\"            },            \"href\": \"https://api.spotify.com/v1/artists/700c9Qz2z6HZKTumeliKAw\",            \"id\": \"700c9Qz2z6HZKTumeliKAw\",            \"name\": \"LONOWN\",            \"type\": \"artist\",            \"uri\": \"spotify:artist:700c9Qz2z6HZKTumeliKAw\"          },          {            \"external_urls\": {              \"spotify\": \"https://open.spotify.com/artist/31wcwYyqQIfZCtIzCY3R53\"            },            \"href\": \"https://api.spotify.com/v1/artists/31wcwYyqQIfZCtIzCY3R53\",            \"id\": \"31wcwYyqQIfZCtIzCY3R53\",            \"name\": \"STM\",            \"type\": \"artist\",            \"uri\": \"spotify:artist:31wcwYyqQIfZCtIzCY3R53\"          }        ],        \"disc_number\": 1,        \"duration_ms\": 212000,        \"explicit\": false,        \"external_ids\": {          \"isrc\": \"FRX762339696\"        },        \"external_urls\": {          \"spotify\": \"https://open.spotify.com/track/1IPHnu3hVkawJMzkP97tcm\"        },        \"href\": \"https://api.spotify.com/v1/tracks/1IPHnu3hVkawJMzkP97tcm\",        \"id\": \"1IPHnu3hVkawJMzkP97tcm\",        \"is_playable\": true,        \"name\": \"Sleepwalker\",        \"popularity\": 81,        \"preview_url\": \"https://p.scdn.co/mp3-preview/db164f3c8efc773af0dd7ee0745b61c9059953f3?cid=54c8446567714f6cac24a4b6e3cb0034\",        \"track_number\": 3,        \"type\": \"track\",        \"uri\": \"spotify:track:1IPHnu3hVkawJMzkP97tcm\",        \"is_local\": false      },      {        \"album\": {          \"album_type\": \"album\",          \"total_tracks\": 7,          \"external_urls\": {            \"spotify\": \"https://open.spotify.com/album/41iTBLw2i6wfyN35B282Xx\"          },          \"href\": \"https://api.spotify.com/v1/albums/41iTBLw2i6wfyN35B282Xx\",          \"id\": \"41iTBLw2i6wfyN35B282Xx\",          \"images\": [            {              \"url\": \"https://i.scdn.co/image/ab67616d0000b273718575ca3d87e305777a92f4\",              \"height\": 640,              \"width\": 640            },            {              \"url\": \"https://i.scdn.co/image/ab67616d00001e02718575ca3d87e305777a92f4\",              \"height\": 300,              \"width\": 300            },            {              \"url\": \"https://i.scdn.co/image/ab67616d00004851718575ca3d87e305777a92f4\",              \"height\": 64,              \"width\": 64            }          ],          \"name\": \"x+y=u+i\",          \"release_date\": \"2024-01-01\",          \"release_date_precision\": \"day\",          \"type\": \"album\",          \"uri\": \"spotify:album:41iTBLw2i6wfyN35B282Xx\",          \"artists\": [            {              \"external_urls\": {                \"spotify\": \"https://open.spotify.com/artist/00u7f1DkMiY0BJnc9HpjuE\"              },              \"href\": \"https://api.spotify.com/v1/artists/00u7f1DkMiY0BJnc9HpjuE\",              \"id\": \"00u7f1DkMiY0BJnc9HpjuE\",              \"name\": \"Jaideep Padhi\",              \"type\": \"artist\",              \"uri\": \"spotify:artist:00u7f1DkMiY0BJnc9HpjuE\"            }          ],          \"is_playable\": true        },        \"artists\": [          {            \"external_urls\": {              \"spotify\": \"https://open.spotify.com/artist/00u7f1DkMiY0BJnc9HpjuE\"            },            \"href\": \"https://api.spotify.com/v1/artists/00u7f1DkMiY0BJnc9HpjuE\",            \"id\": \"00u7f1DkMiY0BJnc9HpjuE\",            \"name\": \"Jaideep Padhi\",            \"type\": \"artist\",            \"uri\": \"spotify:artist:00u7f1DkMiY0BJnc9HpjuE\"          },          {            \"external_urls\": {              \"spotify\": \"https://open.spotify.com/artist/1TAXLeHhMvZtO9w8qTTV6X\"            },            \"href\": \"https://api.spotify.com/v1/artists/1TAXLeHhMvZtO9w8qTTV6X\",            \"id\": \"1TAXLeHhMvZtO9w8qTTV6X\",            \"name\": \"Rico Maz\",            \"type\": \"artist\",            \"uri\": \"spotify:artist:1TAXLeHhMvZtO9w8qTTV6X\"          }        ],        \"disc_number\": 1,        \"duration_ms\": 192548,        \"explicit\": false,        \"external_ids\": {          \"isrc\": \"QZWFJ2307337\"        },        \"external_urls\": {          \"spotify\": \"https://open.spotify.com/track/4VqgrPjzW1lWpQZrPcb7yR\"        },        \"href\": \"https://api.spotify.com/v1/tracks/4VqgrPjzW1lWpQZrPcb7yR\",        \"id\": \"4VqgrPjzW1lWpQZrPcb7yR\",        \"is_playable\": true,        \"name\": \"Bye Bye\",        \"popularity\": 61,        \"preview_url\": \"https://p.scdn.co/mp3-preview/d6c6e3c50ca6be4987aeda02669100154e68675e?cid=54c8446567714f6cac24a4b6e3cb0034\",        \"track_number\": 2,        \"type\": \"track\",        \"uri\": \"spotify:track:4VqgrPjzW1lWpQZrPcb7yR\",        \"is_local\": false      },      {        \"album\": {          \"album_type\": \"single\",          \"total_tracks\": 1,          \"external_urls\": {            \"spotify\": \"https://open.spotify.com/album/13JoBPPaKWh2eusprVgAFu\"          },          \"href\": \"https://api.spotify.com/v1/albums/13JoBPPaKWh2eusprVgAFu\",          \"id\": \"13JoBPPaKWh2eusprVgAFu\",          \"images\": [            {              \"url\": \"https://i.scdn.co/image/ab67616d0000b2739660b2d26342813fabe3bd8c\",              \"height\": 640,              \"width\": 640            },            {              \"url\": \"https://i.scdn.co/image/ab67616d00001e029660b2d26342813fabe3bd8c\",              \"height\": 300,              \"width\": 300            },            {              \"url\": \"https://i.scdn.co/image/ab67616d000048519660b2d26342813fabe3bd8c\",              \"height\": 64,              \"width\": 64            }          ],          \"name\": \"Freak Show\",          \"release_date\": \"2020-06-09\",          \"release_date_precision\": \"day\",          \"type\": \"album\",          \"uri\": \"spotify:album:13JoBPPaKWh2eusprVgAFu\",          \"artists\": [            {              \"external_urls\": {                \"spotify\": \"https://open.spotify.com/artist/6CrThJMQVJfWaHeliiLHuw\"              },              \"href\": \"https://api.spotify.com/v1/artists/6CrThJMQVJfWaHeliiLHuw\",              \"id\": \"6CrThJMQVJfWaHeliiLHuw\",              \"name\": \"Punkinloveee\",              \"type\": \"artist\",              \"uri\": \"spotify:artist:6CrThJMQVJfWaHeliiLHuw\"            }          ],          \"is_playable\": true        },        \"artists\": [          {            \"external_urls\": {              \"spotify\": \"https://open.spotify.com/artist/6CrThJMQVJfWaHeliiLHuw\"            },            \"href\": \"https://api.spotify.com/v1/artists/6CrThJMQVJfWaHeliiLHuw\",            \"id\": \"6CrThJMQVJfWaHeliiLHuw\",            \"name\": \"Punkinloveee\",            \"type\": \"artist\",            \"uri\": \"spotify:artist:6CrThJMQVJfWaHeliiLHuw\"          },          {            \"external_urls\": {              \"spotify\": \"https://open.spotify.com/artist/1tHZYGc37FSzvOJ0eHbglI\"            },            \"href\": \"https://api.spotify.com/v1/artists/1tHZYGc37FSzvOJ0eHbglI\",            \"id\": \"1tHZYGc37FSzvOJ0eHbglI\",            \"name\": \"H3artcrush\",            \"type\": \"artist\",            \"uri\": \"spotify:artist:1tHZYGc37FSzvOJ0eHbglI\"          }        ],        \"disc_number\": 1,        \"duration_ms\": 125361,        \"explicit\": true,        \"external_ids\": {          \"isrc\": \"QZHN62062201\"        },        \"external_urls\": {          \"spotify\": \"https://open.spotify.com/track/2Rb6nYmuLEblpq4KIAjngL\"        },        \"href\": \"https://api.spotify.com/v1/tracks/2Rb6nYmuLEblpq4KIAjngL\",        \"id\": \"2Rb6nYmuLEblpq4KIAjngL\",        \"is_playable\": true,        \"name\": \"Freak Show\",        \"popularity\": 75,        \"preview_url\": \"https://p.scdn.co/mp3-preview/73753e5e54270177d29463c4db76b9f8371d00f4?cid=54c8446567714f6cac24a4b6e3cb0034\",        \"track_number\": 1,        \"type\": \"track\",        \"uri\": \"spotify:track:2Rb6nYmuLEblpq4KIAjngL\",        \"is_local\": false      }    ]  }}")
                });

            var mockClient = new HttpClient(mockHandler.Object);
            SpotifyService spotifyService = new SpotifyService(mockClient, "cliendId", "clientSecret");

            // Act
            var result = await spotifyService.SearchForTracks("bye", 0);

            // Assert
            Assert.AreEqual("Bye Bye Bye", result.First().Title);
            Assert.AreEqual("*NSYNC", result.First().Artists.Single().Name);
        }

        [TestMethod]
        // Mock test to see if search in Spotify returns correct artist name
        public async Task SearchForArtists_ReturnsCorrectNameOfArtist()
        {
            // Arrange
            var mockHandler = new Mock<HttpMessageHandler>();
            mockHandler
                .Protected()
                .Setup<Task<HttpResponseMessage>>(
                    "SendAsync",
                    ItExpr.IsAny<HttpRequestMessage>(),
                    ItExpr.IsAny<CancellationToken>()
                    )
                .ReturnsAsync(new HttpResponseMessage()
                {
                    StatusCode = HttpStatusCode.OK,
                    Content = new StringContent("{  \"artists\": {    \"href\": \"https://api.spotify.com/v1/search?query=silverstein&type=artist&locale=en-GB%2Cen%3Bq%3D0.5&offset=0&limit=6\",    \"limit\": 6,    \"next\": \"https://api.spotify.com/v1/search?query=silverstein&type=artist&locale=en-GB%2Cen%3Bq%3D0.5&offset=6&limit=6\",    \"offset\": 0,    \"previous\": null,    \"total\": 413,    \"items\": [      {        \"external_urls\": {          \"spotify\": \"https://open.spotify.com/artist/1Tsag5J854qxeOo2apszug\"        },        \"followers\": {          \"href\": null,          \"total\": 696986        },        \"genres\": [\"canadian post-hardcore\", \"canadian rock\", \"metalcore\", \"neon pop punk\", \"pop emo\", \"pop punk\", \"post-hardcore\", \"screamo\"],        \"href\": \"https://api.spotify.com/v1/artists/1Tsag5J854qxeOo2apszug\",        \"id\": \"1Tsag5J854qxeOo2apszug\",        \"images\": [          {            \"url\": \"https://i.scdn.co/image/ab6761610000e5ebd0bbbc3c7f791a436b51231e\",            \"height\": 640,            \"width\": 640          },          {            \"url\": \"https://i.scdn.co/image/ab67616100005174d0bbbc3c7f791a436b51231e\",            \"height\": 320,            \"width\": 320          },          {            \"url\": \"https://i.scdn.co/image/ab6761610000f178d0bbbc3c7f791a436b51231e\",            \"height\": 160,            \"width\": 160          }        ],        \"name\": \"Silverstein\",        \"popularity\": 57,        \"type\": \"artist\",        \"uri\": \"spotify:artist:1Tsag5J854qxeOo2apszug\"      },      {        \"external_urls\": {          \"spotify\": \"https://open.spotify.com/artist/1Ffb6ejR6Fe5IamqA5oRUF\"        },        \"followers\": {          \"href\": null,          \"total\": 5322836        },        \"genres\": [\"melodic metalcore\", \"metalcore\", \"modern rock\", \"rock\", \"uk metalcore\"],        \"href\": \"https://api.spotify.com/v1/artists/1Ffb6ejR6Fe5IamqA5oRUF\",        \"id\": \"1Ffb6ejR6Fe5IamqA5oRUF\",        \"images\": [          {            \"url\": \"https://i.scdn.co/image/ab6761610000e5eb22569dee4597722952f4325b\",            \"height\": 640,            \"width\": 640          },          {            \"url\": \"https://i.scdn.co/image/ab6761610000517422569dee4597722952f4325b\",            \"height\": 320,            \"width\": 320          },          {            \"url\": \"https://i.scdn.co/image/ab6761610000f17822569dee4597722952f4325b\",            \"height\": 160,            \"width\": 160          }        ],        \"name\": \"Bring Me The Horizon\",        \"popularity\": 79,        \"type\": \"artist\",        \"uri\": \"spotify:artist:1Ffb6ejR6Fe5IamqA5oRUF\"      },      {        \"external_urls\": {          \"spotify\": \"https://open.spotify.com/artist/0X7vWupejzA2A8bwITrWot\"        },        \"followers\": {          \"href\": null,          \"total\": 4341        },        \"genres\": [\"cascadia psych\", \"pastoral\"],        \"href\": \"https://api.spotify.com/v1/artists/0X7vWupejzA2A8bwITrWot\",        \"id\": \"0X7vWupejzA2A8bwITrWot\",        \"images\": [          {            \"url\": \"https://i.scdn.co/image/ab6761610000e5eb3398074856292193edf605e4\",            \"height\": 640,            \"width\": 640          },          {            \"url\": \"https://i.scdn.co/image/ab676161000051743398074856292193edf605e4\",            \"height\": 320,            \"width\": 320          },          {            \"url\": \"https://i.scdn.co/image/ab6761610000f1783398074856292193edf605e4\",            \"height\": 160,            \"width\": 160          }        ],        \"name\": \"Jeffrey Silverstein\",        \"popularity\": 26,        \"type\": \"artist\",        \"uri\": \"spotify:artist:0X7vWupejzA2A8bwITrWot\"      },      {        \"external_urls\": {          \"spotify\": \"https://open.spotify.com/artist/3GzWhE2xadJiW8MqRKIVSK\"        },        \"followers\": {          \"href\": null,          \"total\": 605738        },        \"genres\": [\"christian metal\", \"christian metalcore\", \"melodic metalcore\", \"metalcore\", \"pop punk\", \"post-hardcore\", \"screamo\", \"tampa indie\"],        \"href\": \"https://api.spotify.com/v1/artists/3GzWhE2xadJiW8MqRKIVSK\",        \"id\": \"3GzWhE2xadJiW8MqRKIVSK\",        \"images\": [          {            \"url\": \"https://i.scdn.co/image/ab6761610000e5ebbbd7c23baf6f0752d366c679\",            \"height\": 640,            \"width\": 640          },          {            \"url\": \"https://i.scdn.co/image/ab67616100005174bbd7c23baf6f0752d366c679\",            \"height\": 320,            \"width\": 320          },          {            \"url\": \"https://i.scdn.co/image/ab6761610000f178bbd7c23baf6f0752d366c679\",            \"height\": 160,            \"width\": 160          }        ],        \"name\": \"Underoath\",        \"popularity\": 55,        \"type\": \"artist\",        \"uri\": \"spotify:artist:3GzWhE2xadJiW8MqRKIVSK\"      },      {        \"external_urls\": {          \"spotify\": \"https://open.spotify.com/artist/3Q7NK4NmGgDTdwcngoyzm0\"        },        \"followers\": {          \"href\": null,          \"total\": 498        },        \"genres\": [],        \"href\": \"https://api.spotify.com/v1/artists/3Q7NK4NmGgDTdwcngoyzm0\",        \"id\": \"3Q7NK4NmGgDTdwcngoyzm0\",        \"images\": [],        \"name\": \"Keith Silverstein\",        \"popularity\": 26,        \"type\": \"artist\",        \"uri\": \"spotify:artist:3Q7NK4NmGgDTdwcngoyzm0\"      },      {        \"external_urls\": {          \"spotify\": \"https://open.spotify.com/artist/6qyi8X6MdP1lu6B1K6yh3h\"        },        \"followers\": {          \"href\": null,          \"total\": 628635        },        \"genres\": [\"alternative rock\", \"indie rock\", \"la indie\", \"modern alternative rock\", \"modern rock\"],        \"href\": \"https://api.spotify.com/v1/artists/6qyi8X6MdP1lu6B1K6yh3h\",        \"id\": \"6qyi8X6MdP1lu6B1K6yh3h\",        \"images\": [          {            \"url\": \"https://i.scdn.co/image/ab6761610000e5ebd3c9dc38ed243e584ba7cce3\",            \"height\": 640,            \"width\": 640          },          {            \"url\": \"https://i.scdn.co/image/ab67616100005174d3c9dc38ed243e584ba7cce3\",            \"height\": 320,            \"width\": 320          },          {            \"url\": \"https://i.scdn.co/image/ab6761610000f178d3c9dc38ed243e584ba7cce3\",            \"height\": 160,            \"width\": 160          }        ],        \"name\": \"Silversun Pickups\",        \"popularity\": 54,        \"type\": \"artist\",        \"uri\": \"spotify:artist:6qyi8X6MdP1lu6B1K6yh3h\"      }    ]  }}")
                });

            var mockClient = new HttpClient(mockHandler.Object);
            SpotifyService spotifyService = new SpotifyService(mockClient, "cliendId", "clientSecret");

            // Act
            var result = await spotifyService.SearchForArtists("silverstein", 0);

            // Assert
            Assert.AreEqual("Silverstein", result.First().ArtistName);
        }

        // Mock test
        [TestMethod]
        public async Task GetDanceability_ReturnCorrectDanceabilityForTrack()
        {
            // Arrange
            var mockHandler = new Mock<HttpMessageHandler>();
            mockHandler
                .Protected()
                .Setup<Task<HttpResponseMessage>>(
                    "SendAsync",
                    ItExpr.IsAny<HttpRequestMessage>(),
                    ItExpr.IsAny<CancellationToken>()
                    )
                .ReturnsAsync(new HttpResponseMessage()
                {
                    StatusCode = HttpStatusCode.OK,
                    Content = new StringContent("{  \"acousticness\": 0.168,  \"analysis_url\": \"https://api.spotify.com/v1/audio-analysis/0wbDgMuAoy7O7pL3a69uZx\",  \"danceability\": 0.975,  \"duration_ms\": 234027,  \"energy\": 0.711,  \"id\": \"0wbDgMuAoy7O7pL3a69uZx\",  \"instrumentalness\": 0.000552,  \"key\": 8,  \"liveness\": 0.0799,  \"loudness\": -3.904,  \"mode\": 1,  \"speechiness\": 0.0632,  \"tempo\": 110.621,  \"time_signature\": 4,  \"track_href\": \"https://api.spotify.com/v1/tracks/0wbDgMuAoy7O7pL3a69uZx\",  \"type\": \"audio_features\",  \"uri\": \"spotify:track:0wbDgMuAoy7O7pL3a69uZx\",  \"valence\": 0.815}")
                });

            var mockClient = new HttpClient(mockHandler.Object);
            SpotifyService spotifyService = new SpotifyService(mockClient, "cliendId", "clientSecret");

            // Act
            var result = await spotifyService.GetDanceability("0wbDgMuAoy7O7pL3a69uZx");

            // Assert
            Assert.AreEqual(0.975, result);
        }
    }
}
